
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@*<link rel="stylesheet" href="~/Scripts/KenodUI2017.1.223/styles/kendo.common.min.css" />
    <link rel="stylesheet" href="~/Scripts/KenodUI2017.1.223/styles/kendo.bootstrap.min.css" />
    <script src="~/Scripts/jquery-2.1.4.min.js"></script>
    <script src="~/Scripts/KenodUI2017.1.223/kendo.all.min.js"></script>*@

<link rel="stylesheet" href="~/Scripts/KenodUI2017.1.223/styles/kendo.bootstrap.mobile.min.css" />


    <div>
            <h4>Check nodes</h4>
            <div id="treeview"></div>
        <div style="padding-top: 2em;">
            <h4>Status</h4>
            <p id="result">No nodes checked.</p>
        </div>
    </div>

    <script>
        $.ajax({
            type: "POST",
            url: "/Permissions/GetScreens",
            dataType: "json",
          success: function (data) {
              $("#treeview").kendoTreeView({
                  dataSource: data,
                  checkboxes: {
                      checkChildren: true
                  },

                  check: onCheck
              });
           },
        });
       

        // function that gathers IDs of checked nodes
        function checkedNodeIds(nodes, checkedNodes) {
            for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].checked) {
                    checkedNodes.push(nodes[i].id);
                }

                if (nodes[i].hasChildren) {
                    checkedNodeIds(nodes[i].children.view(), checkedNodes);
                }
            }
        }

        // show checked node IDs on datasource change
        function onCheck() {
            var checkedNodes = [],
                treeView = $("#treeview").data("kendoTreeView"),
                message;

            checkedNodeIds(treeView.dataSource.view(), checkedNodes);

            if (checkedNodes.length > 0) {
                message = "IDs of checked nodes: " + checkedNodes.join(",");
            } else {
                message = "No nodes checked.";
            }

            $("#result").html(message);
        }
    </script>

    <style>
        
        .rootfolder {
            background-position: 0 0;
        }

        .folder {
            background-position: 0 -16px;
        }

        .pdf {
            background-position: 0 -32px;
        }

        .html {
            background-position: 0 -48px;
        }

        .image {
            background-position: 0 -64px;
        }
    </style>

@Html.Partial("_HighlightMenu", 0)

